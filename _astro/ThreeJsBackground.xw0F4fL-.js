import{B as J,M as N,a as K,S as Q,P as U,W as V,b as X,j as Y}from"./three.module.D2dEyiJB.js";import{r as B}from"./index.BVOCwoKb.js";class Z{constructor(t,f=" .:-=+*#%@",s={}){const d=s.resolution||.15,a=s.scale||1,m=s.color||!1,r=s.alpha||!1,w=s.block||!1,x=s.invert||!1,h=s.strResolution||"low";let u,g;const p=document.createElement("div");p.style.cursor="default";const c=document.createElement("table");p.appendChild(c);let n,o,E;this.setSize=function(e,l){u=e,g=l,t.setSize(e,l),F()},this.render=function(e,l){t.render(e,l),q(c)},this.domElement=p;function F(){n=Math.floor(u*d),o=Math.floor(g*d),k.width=n,k.height=o,E=t.domElement,E.style.backgroundColor&&(c.rows[0].cells[0].style.backgroundColor=E.style.backgroundColor,c.rows[0].cells[0].style.color=E.style.color),c.cellSpacing=0,c.cellPadding=0;const e=c.style;e.whiteSpace="pre",e.margin="0px",e.padding="0px",e.letterSpacing=i+"px",e.fontFamily=j,e.fontSize=T+"px",e.lineHeight=$+"px",e.textAlign="left",e.textDecoration="none"}const G=" .,:;i1tfLCG08@".split(""),P=" CGO08@".split(""),j="courier new, monospace",O=t.domElement,k=document.createElement("canvas");if(!k.getContext)return;const y=k.getContext("2d");if(!y.getImageData)return;let v=m?P:G;f&&(v=f);const T=2/d*a,$=2/d*a;let i=0;if(h=="low")switch(a){case 1:i=-1;break;case 2:case 3:i=-2.1;break;case 4:i=-3.1;break;case 5:i=-4.15;break}if(h=="medium")switch(a){case 1:i=0;break;case 2:i=-1;break;case 3:i=-1.04;break;case 4:case 5:i=-2.1;break}if(h=="high")switch(a){case 1:case 2:i=0;break;case 3:case 4:case 5:i=-1;break}function q(e){y.clearRect(0,0,n,o),y.drawImage(O,0,0,n,o);const l=y.getImageData(0,0,n,o).data;let S="";for(let I=0;I<o;I+=2){for(let R=0;R<n;R++){const z=(I*n+R)*4,M=l[z],A=l[z+1],D=l[z+2],H=l[z+3];let L,W;W=(.3*M+.59*A+.11*D)/255,H==0&&(W=1),L=Math.floor((1-W)*(v.length-1)),x&&(L=v.length-L-1);let C=v[L];(C===void 0||C==" ")&&(C="&nbsp;"),m?S+="<span style='color:rgb("+M+","+A+","+D+");"+(w?"background-color:rgb("+M+","+A+","+D+");":"")+(r?"opacity:"+H/255+";":"")+"'>"+C+"</span>":S+=C}S+="<br/>"}e.innerHTML=`<tr><td style="display:block;width:${u}px;height:${g}px;overflow:hidden">${S}</td></tr>`}}}function _(){const b=new J(1,1,1),t=new N({flatShading:!0});return new K(b,t)}function ne(){const b=B.useRef(null);return B.useEffect(()=>{const t=b.current;if(!t)return;const f=t.clientWidth,s=t.clientHeight,d=new Q,a=new U(75,f/s,.1,1e3);a.position.z=2;const m=new V({alpha:!0});m.setSize(f,s);const r=new Z(m," .:-+*=%@#",{alpha:!0,invert:!1,resolution:.3});r.setSize(f,s),r.domElement.style.backgroundColor="transparent",r.domElement.style.fontWeight="bold",t.appendChild(r.domElement);const w=_();d.add(w);const x=new X(16777215,1);x.position.set(2,2,0),d.add(x);function h(){const n=document.documentElement.classList.contains("theme-dark");let o="#007700";n&&(o="#00ff00"),console.log("Effect color:",o,"isDark:",n),r.domElement.style.color=o.trim()}h();const u=new MutationObserver(()=>h());u.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});let g;const p=()=>{w.rotation.x+=.01,w.rotation.y+=.01,r.render(d,a),g=requestAnimationFrame(p)};p();function c(){if(!t)return;const n=t.clientWidth,o=t.clientHeight;a.aspect=n/o,a.updateProjectionMatrix(),m.setSize(n,o),r.setSize(n,o)}return window.addEventListener("resize",c),()=>{cancelAnimationFrame(g),u.disconnect(),window.removeEventListener("resize",c),t.removeChild(r.domElement),m.dispose()}},[]),Y.jsx("div",{ref:b,style:{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",aspectRatio:"5 / 4",pointerEvents:"none"},"aria-hidden":"true"})}export{ne as ThreeJsBackground};
